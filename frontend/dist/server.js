!function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=16)}([function(e,n){e.exports=require("react")},function(e,n){e.exports=require("styled-components")},function(e,n){e.exports=require("react-router-dom")},function(e,n){e.exports=require("redux-actions")},function(e,n){e.exports=require("react-redux")},function(e,n,t){e.exports=t(14)},function(e,n){e.exports=require("redux-saga/effects")},function(e,n){e.exports=require("react-helmet-async")},function(e,n){e.exports=require("qs")},function(e,n){e.exports=require("react-dom/server")},function(e,n){e.exports=require("express")},function(e,n){e.exports=require("axios")},function(e,n){e.exports=require("immer")},function(e,n){e.exports=require("quill")},function(e,n){e.exports=require("regenerator-runtime")},function(e,n){e.exports=require("quill/dist/quill.bubble.css")},function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(9),u=t.n(o),i=t(10),c=t.n(i),l=t(2),s=t(7),f=t(4);function m(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var p=t(1),d=t.n(p);function g(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function b(){var e=m(["\n    padding-left: 1rem;\n    padding-right: 1rem;\n    width: 1024px;\n    margin: 0 auto; /* 중앙정렬 */\n\n    /* 브라우저 크키에 따라 가로 크기 변경 */\n    @media (max-width: 1024px) {\n        width: 768px;\n    }\n    @media (max-width: 768px) {\n        width: 100%;\n    }\n"]);return b=function(){return e},e}var v=d.a.div(b()),E=function(e){var n=e.children,t=g(e,["children"]);return a.a.createElement(v,t,n)},h={gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"]};function y(){var e=m(["\n    ","\n"]);return y=function(){return e},e}function O(){var e=m(["\n    ","\n"]);return O=function(){return e},e}function S(){var e=m(["\n            background: ",";\n            &:hover {\n                background: ",";\n            }\n        "]);return S=function(){return e},e}function j(){var e=m(["\n            padding-top: 0.75rem;\n            padding-bottom: 0.75rem;\n            width: 100%;\n            font-size: 1.125rem;\n        "]);return j=function(){return e},e}function w(){var e=m(["\n    border: none;\n    border-radius: 4px;\n    font-size: 1rem;\n    font-weight: bold;\n    padding: 0.25rem 1rem;\n    color: white;\n    outline: none;\n    cursor: pointer;\n\n    background: ",";\n    \n    &:hover {\n        background: ",";\n    }\n    &:disabled {\n        background: ",";\n        color: ",";\n        cursor: not-allowed;\n    }\n    \n    ","\n    ","\n"]);return w=function(){return e},e}var x=Object(p.css)(w(),h.gray[8],h.gray[6],h.gray[3],h.gray[5],(function(e){return e.fullWidth&&Object(p.css)(j())}),(function(e){return e.cyan&&Object(p.css)(S(),h.cyan[5],h.cyan[4])})),T=d.a.button(O(),x),C=d()(l.Link)(y(),x),I=function(e){return e.to?a.a.createElement(C,Object.assign({},e,{cyan:e.cyan?1:0})):a.a.createElement(T,e)};function A(){var e=m(["\n    font-weight: 800;\n    margin-right: 1rem;\n"]);return A=function(){return e},e}function k(){var e=m(["\n    height: 4rem;\n"]);return k=function(){return e},e}function R(){var e=m(["\n    height: 4rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between; /* 자식 엘리먼트 사이의 여백을 최대로 설정 */\n    .logo {\n        font-size: 1.125rem;\n        font-weight: 800;\n        letter-spacing: 1.75px;\n    }\n    .right {\n        display: flex;\n        align-items: center;\n    }\n"]);return R=function(){return e},e}function _(){var e=m(["\n    position: fixed;\n    width: 100%;\n    background: white;\n    box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.08);\n"]);return _=function(){return e},e}var P=d.a.div(_()),L=d()(E)(R()),D=d.a.div(k()),N=d.a.div(A()),U=function(e){var n=e.user,t=e.onLogout;return a.a.createElement(a.a.Fragment,null,a.a.createElement(P,null,a.a.createElement(L,null,a.a.createElement(l.Link,{to:"/",className:"logo"},"REACTERS"),n?a.a.createElement("div",{className:"right"},a.a.createElement(N,null,n.username),a.a.createElement(I,{onClick:t},"로그아웃")):a.a.createElement("div",{className:"right"},a.a.createElement(I,{to:"/login"},"로그인")))),a.a.createElement(D,null))};function q(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function F(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function G(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?F(Object(t),!0).forEach((function(n){q(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var H=t(5),M=t.n(H),z=t(3),B=t(6),W=t(11),Z=t.n(W).a.create();Z.defaults.baseURL="http://localhost:4000";var K,J,Q=Object(z.createAction)("loading/START_LOADING",(function(e){return e})),V=Object(z.createAction)("loading/FINISH_LOADING",(function(e){return e}));Object(z.handleActions)((q(K={},"loading/START_LOADING",(function(e,n){return G({},e,q({},n.payload,!0))})),q(K,"loading/FINISH_LOADING",(function(e,n){return G({},e,q({},n.payload,!1))})),K),{});function $(e,n){var t="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return M.a.mark((function a(o){var u;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(B.put)(Q(e));case 2:return a.prev=2,a.next=5,Object(B.call)(n,o.payload);case 5:return u=a.sent,a.next=8,Object(B.put)({type:t,payload:u.data,meta:u});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),a.next=14,Object(B.put)({type:r,payload:a.t0,error:!0});case 14:return a.next=16,Object(B.put)(V(e));case 16:case"end":return a.stop()}}),a,null,[[2,10]])}))}var X="user/CHECK",Y=(Object(z.createAction)("user/TEMP_SET_USER",(function(e){return e})),Object(z.createAction)(X)),ee=Object(z.createAction)("user/LOGOUT");$(X,(function(){return Z.get("/api/auth/check")}));var ne=Object(z.handleActions)((q(J={},"user/TEMP_SET_USER",(function(e,n){return G({},e,{user:n.payload})})),q(J,"user/CHECK_SUCCESS",(function(e,n){return G({},e,{user:n.payload,checkError:null})})),q(J,"user/CHECK_FAILURE",(function(e,n){var t=n.payload;return G({},e,{user:ne,checkError:t})})),q(J,"user/LOGOUT",(function(e){return G({},e,{user:null})})),J),{user:null,checkError:null}),te=function(){var e=Object(f.useSelector)((function(e){return{user:e.user.user}})).user,n=Object(f.useDispatch)();return a.a.createElement(U,{user:e,onLogout:function(){n(ee())}})};function re(){var e=m(["\n            margin-top: 1rem;\n        "]);return re=function(){return e},e}function ae(){var e=m(["\n    /* props가 margin-top을 가지고 있으면(PostViewer) margin-top 값을 1rem 로 설정 */\n    ","\n    color: ",";\n\n    /* span 사이에 가운데점 문자 */\n    span + span:before {\n        color: ",";\n        padding-left: 0.25rem;\n        padding-right: 0.25rem;\n        content: '\\B7';\n    }\n"],["\n    /* props가 margin-top을 가지고 있으면(PostViewer) margin-top 값을 1rem 로 설정 */\n    ","\n    color: ",";\n\n    /* span 사이에 가운데점 문자 */\n    span + span:before {\n        color: ",";\n        padding-left: 0.25rem;\n        padding-right: 0.25rem;\n        content: '\\\\B7';\n    }\n"]);return ae=function(){return e},e}var oe=d.a.div(ae(),(function(e){return e.hasMarginTop&&Object(p.css)(re())}),h.gray[6],h.gray[4]),ue=function(e){var n=e.username,t=e.publishdDate,r=e.hasMarginTop;return a.a.createElement(oe,{hasMarginTop:r},a.a.createElement("span",null,a.a.createElement("b",null,a.a.createElement(l.Link,{to:"/@".concat(n)},n),"    ")),a.a.createElement("span",null,new Date(t).toLocaleDateString()))};function ie(){var e=m(["\n    margin-top: 0.5rem;\n    .tag {\n        display: inline-block;\n        color: ",";\n        text-decoration: none;\n        margin-right: 0.5rem;\n        &:hover {\n            color: ",";\n        }\n    }\n"]);return ie=function(){return e},e}var ce=d.a.div(ie(),h.cyan[7],h.cyan[5]),le=function(e){var n=e.tags;return a.a.createElement(ce,null,n.map((function(e){return a.a.createElement(l.Link,{className:"tag",to:"/?tag=".concat(e),key:e},"    ","#",e)})))};function se(){var e=m(["\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n    \n    /* 맨위 포스트는 padding-top 없음 */\n    &:first-child {\n        padding-top: 0;\n    }\n    & + & {\n        border-top: 1px solid ",";\n    }\n\n    h2 {\n        font-size: 2rem;\n        margin-bottom: 0;\n        margin-top: 0;\n        &:hover {\n            color: ",";\n        }\n    }\n    p {\n        margin-top: 2rem;\n    }\n"]);return se=function(){return e},e}function fe(){var e=m(["\n    display: flex;\n    justify-content: flex-end;\n    margin-bottom: 3rem;\n"]);return fe=function(){return e},e}function me(){var e=m(["\n    margin-top: 3rem;\n"]);return me=function(){return e},e}var pe,de=d()(E)(me()),ge=d.a.div(fe()),be=d.a.div(se(),h.gray[2],h.gray[6]),ve=function(e){var n=e.post,t=n.publishdDate,r=n.title,o=n.user,u=n.body,i=n.tags,c=n._id;return a.a.createElement(be,null,a.a.createElement("h2",null,a.a.createElement(l.Link,{to:"/@".concat(o.username,"/").concat(c)},r)),a.a.createElement(ue,{username:o.username,publishdDate:new Date(t)}),a.a.createElement(le,{tags:i}),a.a.createElement("p",null,u))},Ee=function(e){var n=e.posts,t=e.loading,r=e.error,o=e.showWrittenButton;return r?a.a.createElement(de,null,"에러 발생"):a.a.createElement(de,null,a.a.createElement(ge,null,o&&a.a.createElement(I,{cyan:!0,to:"/write"},"새 글 작성하기")),!t&&n&&a.a.createElement("div",null,n.map((function(e){return a.a.createElement(ve,{post:e,key:e._id})}))))},he=t(8),ye=t.n(he),Oe=Object(z.createAction)("posts/LIST_POSTS",(function(e){return{tag:e.tag,username:e.username,page:e.page}}));$("posts/LIST_POSTS",(function(e){var n=e.page,t=e.username,r=e.tag,a=ye.a.stringify({page:n,username:t,tag:r});return Z.get("/api/posts?".concat(a))}));Object(z.handleActions)((q(pe={},"posts/LIST_POSTS_SUCCESS",(function(e,n){var t=n.payload,r=n.meta;return G({},e,{posts:t,lastPage:parseInt(r.headers["last-page"],10)})})),q(pe,"posts/LIST_POSTS_FAILURE",(function(e,n){return G({},e,{error:n.payload})})),pe),{posts:null,error:null,lastPage:1});var Se=Object(l.withRouter)((function(e){var n=e.match,t=e.location,o=Object(f.useDispatch)(),u=Object(f.useSelector)((function(e){var n=e.posts,t=e.user,r=e.loading;return{posts:n.posts,error:n.error,user:t.user,loading:r["posts/LIST_POSTS"]}})),i=u.posts,c=u.error,l=u.loading,s=u.user;return Object(r.useEffect)((function(){var e=n.params.username,r=ye.a.parse(t.search,{ignoreQueryPrefix:!0}),a=r.tag,u=r.page;o(Oe({tag:a,username:e,page:u}))}),[o,t.search]),a.a.createElement(Ee,{loading:l,posts:i,error:c,showWrittenButton:s})}));function je(){var e=m([""]);return je=function(){return e},e}function we(){var e=m(["\n    width: 320px;\n    margin: 0 auto;\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 3rem;\n"]);return we=function(){return e},e}var xe=d.a.div(we()),Te=d.a.div(je()),Ce=function(e){var n=e.username,t=e.tag,r=e.page,a=ye.a.stringify({tag:t,page:r});return n?"/@".concat(n,"?").concat(a):"/?".concat(a)},Ie=function(e){var n=e.page,t=e.lastPage,r=e.username,o=e.tag;return a.a.createElement(xe,null,a.a.createElement(I,{disabled:1===n,to:1===n?void 0:Ce({username:r,tag:o,page:n-1})},"이전"),a.a.createElement(Te,null,n),a.a.createElement(I,{disabled:n===t,to:n===t?void 0:Ce({username:r,tag:o,page:n+1})},"다음"))},Ae=Object(l.withRouter)((function(e){var n=e.match,t=e.location,r=Object(f.useSelector)((function(e){var n=e.posts,t=e.loading;return{lastPage:n.lastPage,posts:n.posts,loading:t["posts/LIST_POSTS"]}})),o=r.lastPage,u=r.posts,i=r.loading;if(!u||i)return null;var c=n.params.username,l=ye.a.parse(t.search,{ignoreQueryPrefix:!0}),s=l.tag,m=l.page,p=void 0===m?1:m;return a.a.createElement(Ie,{tag:s,page:parseInt(p,10),username:c,lastPage:o})})),ke=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(te,null),a.a.createElement(Se,null),a.a.createElement(Ae,null))};function Re(){var e=m(["\n    .logo-area {\n        display: block;\n        padding-bottom: 2rem;\n        text-align: center;\n        font-weight: bold;\n        letter-spacing: 2px;\n    }\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.025);\n    padding: 2rem;\n    width: 360px;\n    background: white;\n    border-radius: 2px;\n"]);return Re=function(){return e},e}function _e(){var e=m(["\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    background: ",";\n    /* flex로 내부 내용 중앙 정렬 */\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]);return _e=function(){return e},e}var Pe=d.a.div(_e(),h.gray[2]),Le=d.a.div(Re()),De=function(e){var n=e.children;return a.a.createElement(Pe,null,a.a.createElement(Le,null,a.a.createElement("div",{className:"logo-area"},a.a.createElement(l.Link,{to:"/"},"RECTERS")),n))};function Ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ue(e,n){if(e){if("string"==typeof e)return Ne(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ne(e,n):void 0}}function qe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],r=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(t.push(u.value),!n||t.length!==n);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return t}}(e,n)||Ue(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Fe,Ge=t(12),He=t.n(Ge),Me="auth/LOGIN",ze=Object(z.createAction)("auth/CHANGE_FIELD",(function(e){return{form:e.form,key:e.key,value:e.value}})),Be=Object(z.createAction)("auth/INITIALIZE_FORM",(function(e){return e})),We=Object(z.createAction)("auth/REGISTER",(function(e){return{username:e.username,password:e.password}})),Ze=Object(z.createAction)(Me,(function(e){return{username:e.username,password:e.password}}));$("auth/REGISTER",(function(e){var n=e.username,t=e.password;return Z.post("/api/auth/register",{username:n,password:t})})),$(Me,(function(e){var n=e.username,t=e.password;return Z.post("/api/auth/login",{username:n,password:t})}));var Ke={register:{username:"",password:"",passwordConfirm:""},login:{username:"",password:""}};Object(z.handleActions)((q(Fe={},"auth/CHANGE_FIELD",(function(e,n){var t=n.payload,r=t.form,a=t.key,o=t.value;return He()(e,(function(e){e[r][a]=o}))})),q(Fe,"auth/INITIALIZE_FORM",(function(e,n){var t=n.payload;return G({},e,q({},t,Ke[t]))})),q(Fe,"auth/REGISTER_SUCCESS",(function(e,n){return G({},e,{authError:null,auth:n.payload})})),q(Fe,"auth/REGISTER_FAILURE",(function(e,n){return G({},e,{authError:n.payload})})),q(Fe,"auth/LOGIN_SUCCESS",(function(e,n){return G({},e,{authError:null,auth:n.payload})})),q(Fe,"auth/LOGIN_FAILURE",(function(e,n){return G({},e,{authError:n.payload})})),Fe),Ke);function Je(){var e=m(["\n    color: red;\n    text-align: center;\n    font-size: 0.875rem;\n    margin-top: 1rem;\n"]);return Je=function(){return e},e}function Qe(){var e=m(["\n    margin-top: 1rem;\n"]);return Qe=function(){return e},e}function Ve(){var e=m(["\n    margin-top: 2rem;\n    text-align: right;\n    a {\n        color: ",";\n        text-decoration: underline;\n        &:hover {\n            color: ",";\n        }\n    }\n"]);return Ve=function(){return e},e}function $e(){var e=m(["\n    font-size: 1rem;\n    border: none;\n    border-bottom: 1px solid ",";\n    padding-bottom: 0.5rem;\n    outline: none;\n    width: 100%;\n    &:focus {\n        color: $oc-teal-7;\n        border-bottom: 1px solid ",";\n    }\n    & + & {\n        margin-top: 1rem;\n    }\n"]);return $e=function(){return e},e}function Xe(){var e=m(["\n    h3 {\n        margin: 0;\n        color: ",";\n        margin-bottom: 1rem;\n    }\n"]);return Xe=function(){return e},e}var Ye=d.a.div(Xe(),h.gray[8]),en=d.a.input($e(),h.gray[5],h.gray[7]),nn=d.a.div(Ve(),h.gray[6],h.gray[9]),tn=d()(I)(Qe()),rn={login:"로그인",register:"회원가입"},an=d.a.div(Je()),on=function(e){var n=e.type,t=e.form,r=e.onChange,o=e.onSubmit,u=e.error,i=rn[n];return a.a.createElement(Ye,null,a.a.createElement("h3",null,i),a.a.createElement("form",{onSubmit:o},a.a.createElement(en,{autoComplete:"username",name:"username",placeholder:"아이디",onChange:r,value:t.username}),a.a.createElement(en,{autoComplete:"new-password",name:"password",placeholder:"비밀번호",type:"password",onChange:r,value:t.password}),"register"===n&&a.a.createElement(en,{autoComplete:"new-password",name:"passwordConfirm",placeholder:"비밀번호 확인",type:"password",onChange:r,value:t.passwordConfirm}),u&&a.a.createElement(an,null,u),a.a.createElement(tn,{cyan:!0,fullWidth:!0},i),"  "),a.a.createElement(nn,null,"login"===n?a.a.createElement(l.Link,{to:"/register"},"회원가입"):a.a.createElement(l.Link,{to:"/login"},"로그인")))},un=Object(l.withRouter)((function(e){var n=e.history,t=qe(Object(r.useState)(null),2),o=t[0],u=t[1],i=Object(f.useDispatch)(),c=Object(f.useSelector)((function(e){var n=e.auth,t=e.user;return{form:n.login,auth:n.auth,authError:n.authError,user:t.user}})),l=c.form,s=c.auth,m=c.authError,p=c.user;return Object(r.useEffect)((function(){i(Be("login"))}),[i]),Object(r.useEffect)((function(){if(m)return console.log("오류 발생"),console.log(m),void u("로그인 실패");s&&(console.log("로그인 성공"),i(Y()))}),[s,m,i]),Object(r.useEffect)((function(){if(p){n.push("/");try{localStorage.setItem("user",JSON.stringify(p))}catch(e){console.log("localStorage is not working")}}}),[n,p]),a.a.createElement(on,{type:"login",form:l,onChange:function(e){var n=e.target,t=n.value,r=n.name;i(ze({form:"login",key:r,value:t}))},onSubmit:function(e){e.preventDefault();var n=l.username,t=l.password;i(Ze({username:n,password:t}))},error:o})})),cn=function(){return a.a.createElement(De,null,a.a.createElement(s.Helmet,null,a.a.createElement("title",null,"로그인 - REACTERS")),a.a.createElement(un,null))},ln=Object(l.withRouter)((function(e){var n=e.history,t=qe(Object(r.useState)(null),2),o=t[0],u=t[1],i=Object(f.useDispatch)(),c=Object(f.useSelector)((function(e){var n=e.auth,t=e.user;return{form:n.register,auth:n.auth,authError:n.authError,user:t.user}})),l=c.form,s=c.auth,m=c.authError,p=c.user;return Object(r.useEffect)((function(){i(Be("register"))}),[i]),Object(r.useEffect)((function(){if(m)return 409===m.response.status?void u("이미 존재하는 아이디입니다"):void u("회원가입 실패");s&&(console.log("회원가입 성공"),console.log(s),i(Y()))}),[s,m,i]),Object(r.useEffect)((function(){if(p){n.push("/");try{localStorage.setItem("user",JSON.stringify(p))}catch(e){console.log("localStorage is not working")}}}),[n,p]),a.a.createElement(on,{type:"register",form:l,onChange:function(e){var n=e.target,t=n.value,r=n.name;i(ze({form:"register",key:r,value:t}))},onSubmit:function(e){e.preventDefault();var n=l.username,t=l.password,r=l.passwordConfirm;if(![n,t,r].includes(""))return t!==r?(u("비밀번호가 일치하지 않음"),i(ze({form:"register",key:"password",value:""})),void i(ze({form:"register",key:"passwordConfirm",value:""}))):void i(We({username:n,password:t}));u("빈 칸을 모두 입력하시오")},error:o})})),sn=function(){return a.a.createElement(De,null,a.a.createElement(s.Helmet,null,a.a.createElement("title",null,"회원가입 - REACTERS")),a.a.createElement(ln,null))},fn=t(13),mn=t.n(fn);t(15);function pn(){var e=m(["\n    /* 최소 크기 지정 및 padding 제거 */\n    .ql-editor {\n        padding: 0;\n        min-height: 320px;\n        font-size: 1.125rem;\n        line-height: 1.5;\n    }\n    .ql-editor.ql-blank::before {\n        left: 0px;\n    }\n"]);return pn=function(){return e},e}function dn(){var e=m(["\n    font-size: 3rem;\n    outline: none;\n    padding-bottom: 0.5rem;\n    border: none;\n    border-bottom: 1px solid ",";\n    margin-bottom: 2rem;\n    width: 100%;\n"]);return dn=function(){return e},e}function gn(){var e=m(["\n    /* 페이지 위아래 여백 지정 */\n    padding-top: 5rem;\n    padding-bottom: 5rem;\n"]);return gn=function(){return e},e}var bn,vn=d()(E)(gn()),En=d.a.input(dn(),h.gray[4]),hn=d.a.div(pn()),yn=function(e){var n=e.onChangeField,t=e.title,o=e.body,u=Object(r.useRef)(null),i=Object(r.useRef)(null);Object(r.useEffect)((function(){i.current=new mn.a(u.current,{theme:"bubble",placeholder:"내용을 작성하세요",modules:{toolbar:[[{header:"1"},{header:"2"}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block","link","image"]]}});var e=i.current;e.on("text-change",(function(t,r,a){"user"===a&&n({key:"body",value:e.root.innerHTML})}))}),[n]);var c=Object(r.useRef)(!1);Object(r.useEffect)((function(){c.current||(c.current=!0,i.current.root.innerHTML=o)}),[o]);return a.a.createElement(vn,null,a.a.createElement(En,{placeholder:"제목을 입력하세요",onChange:function(e){n({key:"title",value:e.target.value})},value:t}),a.a.createElement(hn,null,a.a.createElement("div",{ref:u}),"  "))},On="write/WRITE_POST",Sn=Object(z.createAction)("write/INITIALIZE"),jn=Object(z.createAction)("write/CHANGE_FIELD",(function(e){return{key:e.key,value:e.value}})),wn=Object(z.createAction)(On,(function(e){return{title:e.title,body:e.body,tags:e.tags}})),xn=Object(z.createAction)("write/SET_ORIGINAL_POST",(function(e){return e})),Tn=Object(z.createAction)("write/UPDATE_POST",(function(e){return{id:e.id,title:e.title,body:e.body,tags:e.tags}}));$(On,(function(e){var n=e.title,t=e.body,r=e.tags;return Z.post("/api/posts",{title:n,body:t,tags:r})})),$("write/UPDATE_POST",(function(e){var n=e.id,t=e.title,r=e.body,a=e.tags;return Z.patch("/api/posts/".concat(n),{title:t,body:r,tags:a})}));var Cn={title:"",body:"",tags:[],post:null,postError:null,originalPostId:null},In=(Object(z.handleActions)((q(bn={},"write/INITIALIZE",(function(e){return Cn})),q(bn,"write/CHANGE_FIELD",(function(e,n){var t=n.payload;return G({},e,q({},t.key,t.value))})),q(bn,On,(function(e){return G({},e,{post:null,postError:null})})),q(bn,"write/WRITE_POST_SUCCESS",(function(e,n){return G({},e,{post:n.payload})})),q(bn,"write/WRITE_POST_FAILURE",(function(e,n){return G({},e,{postError:n.payload})})),q(bn,"write/SET_ORIGINAL_POST",(function(e,n){var t=n.payload;return G({},e,{title:t.title,body:t.body,tags:t.tags,originalPostId:t._id})})),q(bn,"write/UPDATE_POST_SUCCESS",(function(e,n){return G({},e,{post:n.payload})})),q(bn,"write/UPDATE_POST_FAILURE",(function(e,n){return G({},e,{postError:n.payload})})),bn),Cn),function(){var e=Object(f.useDispatch)(),n=Object(f.useSelector)((function(e){var n=e.write;return{title:n.title,body:n.body}})),t=n.title,o=n.body,u=Object(r.useCallback)((function(n){return e(jn(n))}),[e]);return Object(r.useEffect)((function(){return function(){e(Sn())}}),[e]),a.a.createElement(yn,{onChangeField:u,title:t,body:o})});function An(e){return function(e){if(Array.isArray(e))return Ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(){var e=m(["\n    display: flex;\n    margin-top: 0.5rem;\n"]);return kn=function(){return e},e}function Rn(){var e=m(["\n    margin-right: 0.5rem;\n    color: ",";\n    cursor: pointer;\n    &:hover {\n        opacity: 0.5;\n    }\n"]);return Rn=function(){return e},e}function _n(){var e=m(["\n    border-radius: 4px;\n    overflow: hidden;\n    display: flex;\n    width: 255px;\n    border: 1px solid ",";   /* 스타일 초기화 */\n    \n    input, button {\n        outline: none;\n        border: none;\n        font-size: 1rem;\n    }\n\n    input {\n        padding: 0.5rem;\n        flex: 1;\n        min-width: 0;\n    }\n    button {\n        cursor: pointer;\n        padding-right: 1rem;\n        padding-left: 1rem;\n        border: none;\n        background: ",";\n        color: white;\n        font-weight: bold;\n        &:hover {\n            background: ",";\n        }\n    }\n"]);return _n=function(){return e},e}function Pn(){var e=m(["\n    width: 100%;\n    border-top: 1px solid ",";\n    padding-top: 2rem;\n\n    h4 {\n        color: ",";\n        margin-top: 0;\n        margin-bottom: 0.5rem;\n    }\n"]);return Pn=function(){return e},e}var Ln=d.a.div(Pn(),h.gray[2],h.gray[8]),Dn=d.a.form(_n(),h.gray[9],h.gray[8],h.gray[6]),Nn=d.a.div(Rn(),h.gray[6]),Un=d.a.div(kn()),qn=a.a.memo((function(e){var n=e.tag,t=e.onRemove;return a.a.createElement(Nn,{onClick:function(){return t(n)}},"#",n)})),Fn=a.a.memo((function(e){var n=e.tags,t=e.onRemove;return a.a.createElement(Un,null,n.map((function(e){return a.a.createElement(qn,{key:e,tag:e,onRemove:t})})))})),Gn=function(e){var n=e.onChangeTags,t=e.tags,o=qe(Object(r.useState)(""),2),u=o[0],i=o[1],c=qe(Object(r.useState)([]),2),l=c[0],s=c[1],f=Object(r.useCallback)((function(e){if(e&&!l.includes(e)){var t=[].concat(An(l),[e]);s(t),n(t)}}),[l,n]),m=Object(r.useCallback)((function(e){var t=l.filter((function(n){return n!==e}));s(t),n(t)}),[l,n]),p=Object(r.useCallback)((function(e){i(e.target.value)}),[]),d=Object(r.useCallback)((function(e){e.preventDefault(),f(u.trim()),i("")}),[u,f]);return Object(r.useEffect)((function(){s(t)}),[t]),a.a.createElement(Ln,null,a.a.createElement("h4",null,"태그"),a.a.createElement(Dn,{onSubmit:d},a.a.createElement("input",{placeholder:"태그를 입력하세요",value:u,onChange:p}),a.a.createElement("button",{type:"submit"},"추가")),a.a.createElement(Fn,{tags:l,onRemove:m}))},Hn=function(){var e=Object(f.useDispatch)(),n=Object(f.useSelector)((function(e){return e.write.tags}));return a.a.createElement(Gn,{onChangeTags:function(n){e(jn({key:"tags",value:n}))},tags:n})};function Mn(){var e=m(["\n    height: 2.125rem;\n    & + & {\n        margin-left: 0.5rem;\n    }\n"]);return Mn=function(){return e},e}function zn(){var e=m(["\n    margin-top: 1rem;\n    margin-bottom: 3rem;\n    button + button {\n        margin-left: 0.5rem;\n    }\n"]);return zn=function(){return e},e}var Bn,Wn=d.a.div(zn()),Zn=d()(I)(Mn()),Kn=function(e){var n=e.onCancel,t=e.onPublish,r=e.isEdit;return a.a.createElement(Wn,null,a.a.createElement(Zn,{cyan:!0,onClick:t},"포스트",r?"수정":"등록"),a.a.createElement(Zn,{onClick:n},"취소"))},Jn=Object(l.withRouter)((function(e){var n=e.history,t=Object(f.useDispatch)(),o=Object(f.useSelector)((function(e){var n=e.write;return{title:n.title,body:n.body,tags:n.tags,post:n.post,postError:n.postError,originalPostId:n.originalPostId}})),u=o.title,i=o.body,c=o.tags,l=o.post,s=o.postError,m=o.originalPostId;return Object(r.useEffect)((function(){if(l){var e=l._id,t=l.user;n.push("/@".concat(t.username,"/").concat(e))}s&&console.log(s)}),[n,l,s]),a.a.createElement(Kn,{onPublish:function(){t(m?Tn({title:u,body:i,tags:c,id:m}):wn({title:u,body:i,tags:c}))},onCancel:function(){n.goBack()},isEdit:m})})),Qn=function(){return a.a.createElement(E,null,a.a.createElement(s.Helmet,null,a.a.createElement("title",null,"글쓰기 - REACTERS")),a.a.createElement(In,null),a.a.createElement(Hn,null),a.a.createElement(Jn,null))};function Vn(e,n,t,r,a,o,u){try{var i=e[o](u),c=i.value}catch(e){return void t(e)}i.done?n(c):Promise.resolve(c).then(r,a)}var $n=Object(z.createAction)("posts/READ_POST",(function(e){return e})),Xn=Object(z.createAction)("posts/UNLOAD_POST");$("posts/READ_POST",(function(e){return Z.get("/api/posts/".concat(e))}));var Yn={post:null,error:null};Object(z.handleActions)((q(Bn={},"posts/READ_POST_SUCCESS",(function(e,n){return G({},e,{post:n.payload})})),q(Bn,"posts/READ_POST_FAILURE",(function(e,n){return G({},e,{error:n.payload})})),q(Bn,"posts/UNLOAD_POST",(function(){return Yn})),Bn),Yn);function et(){var e=m(["\n    font-size: 1.3125rem;\n    color: ",";\n"]);return et=function(){return e},e}function nt(){var e=m(["\n    border-bottom: 1px solid ",";\n    padding-bottom: 3rem;\n    margin-bottom: 3rem;\n    h1 {\n        font-size: 3rem;\n        line-height: 1.5;\n        margin: 0;\n    }\n"]);return nt=function(){return e},e}function tt(){var e=m(["\n    margin-top: 4rem;\n"]);return tt=function(){return e},e}var rt=d()(E)(tt()),at=d.a.div(nt(),h.gray[3]),ot=d.a.div(et(),h.gray[8]),ut=function(e){var n=e.post,t=e.error,r=e.loading,o=e.actionButtons;if(t)return t.response&&404===t.response.status?a.a.createElement(rt,null,"존재하지 않는 포스트입니다."):a.a.createElement(rt,null,"오류 발생");if(r||!n)return null;var u=n.title,i=n.body,c=n.user,l=n.publishdDate,f=n.tags;return a.a.createElement(rt,null,a.a.createElement(s.Helmet,null,a.a.createElement("title",null,u," - REACTERS")),a.a.createElement(at,null,a.a.createElement("h1",null,u),a.a.createElement(ue,{username:c.username,publishdDate:l,hasMarginTop:!0}),a.a.createElement(le,{tags:f})),o,a.a.createElement(ot,{dangerouslySetInnerHTML:{__html:i}}))};function it(){var e=m(["\n    height: 2rem;\n    & + & {\n        margin-left: 0.75rem;\n    }\n"]);return it=function(){return e},e}function ct(){var e=m(["\n    width: 320px;\n    background: white;\n    padding: 1.5rem;\n    border-radius: 4px;\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.125);\n    h2 {\n        margin-top: 0;\n        margin-bottom: 1rem;\n    }\n    p {\n        margin-bottm: 3rem;\n    }\n    .buttons {\n        display: flex;\n        justify-content: flex-end;\n    }\n"]);return ct=function(){return e},e}function lt(){var e=m(["\n    position: fixed;\n    z-index: 30;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.25);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return lt=function(){return e},e}var st=d.a.div(lt()),ft=d.a.div(ct()),mt=d()(I)(it()),pt=function(e){var n=e.visible,t=e.title,r=e.description,o=e.confirmText,u=void 0===o?"확인":o,i=e.cancleText,c=void 0===i?"취소":i,l=e.onConfirm,s=e.onCancle;return n?a.a.createElement(st,null,a.a.createElement(ft,null,a.a.createElement("h2",null,t),a.a.createElement("p",null,r),a.a.createElement("div",{className:"buttons"},a.a.createElement(mt,{onClick:s},c),a.a.createElement(mt,{cyan:!0,onClick:l},u)))):null},dt=function(e){var n=e.visible,t=e.onConfirm,r=e.onCancle;return a.a.createElement(pt,{visible:n,title:"포스트 삭제",description:"포스트를 정말 삭제하시겠습니까?",confirmText:"삭제",onConfirm:t,onCancle:r})};function gt(){var e=m(["\n    padding: 0.25rem 0.5rem;\n    border-radius: 4px;\n    color: ",";\n    font-weight: bold;\n    outline: none;\n    border: none;\n    font-size: 0.875rem;\n    cursor: pointer;\n    &:hover {\n        background: ",";\n        color: ",";\n    }\n    & + & {\n        margin-left: 0.25rem;\n    }\n"]);return gt=function(){return e},e}function bt(){var e=m(["\n    display: flex;\n    justify-content: flex-end;\n    margin-bottom: 2rem;\n    margin-top: 1.5rem;\n"]);return bt=function(){return e},e}var vt=d.a.div(bt()),Et=d.a.button(gt(),h.gray[6],h.gray[1],h.cyan[7]),ht=function(e){var n=e.onEdit,t=e.onRemove,o=qe(Object(r.useState)(!1),2),u=o[0],i=o[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(vt,null,a.a.createElement(Et,{onClick:n},"수정"),a.a.createElement(Et,{onClick:function(){i(!0)}},"삭제")),a.a.createElement(dt,{visible:u,onConfirm:function(){i(!1),t()},onCancle:function(){i(!1)}}))},yt=Object(l.withRouter)((function(e){var n=e.match,t=e.history,o=n.params.postId,u=Object(f.useDispatch)(),i=Object(f.useSelector)((function(e){var n=e.post,t=e.loading,r=e.user;return{post:n.post,error:n.error,loading:t["post/READ_POST"],user:r.user}})),c=i.post,l=i.error,s=i.loading,m=i.user;Object(r.useEffect)((function(){return u($n(o)),function(){u(Xn())}}),[u,o]);var p=function(){var e,n=(e=M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=o,Z.delete("/api/posts/".concat(n));case 3:t.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}var n}),e,null,[[0,6]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function u(e){Vn(o,r,a,u,i,"next",e)}function i(e){Vn(o,r,a,u,i,"throw",e)}u(void 0)}))});return function(){return n.apply(this,arguments)}}(),d=(m&&m._id)===(c&&c.user._id);return a.a.createElement(ut,{post:c,loading:s,error:l,actionButtons:d&&a.a.createElement(ht,{onEdit:function(){u(xn(c)),t.push("/write")},onRemove:p})})})),Ot=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(te,null),a.a.createElement(yt,null))},St=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.Helmet,null,a.a.createElement("title",null,"REACTERS")),a.a.createElement(l.Route,{component:ke,path:["/@:username","/"],exact:!0}),a.a.createElement(l.Route,{component:cn,path:"/login"}),a.a.createElement(l.Route,{component:sn,path:"/register"}),a.a.createElement(l.Route,{component:Qn,path:"/write"}),a.a.createElement(l.Route,{component:Ot,path:"/@:username/:postId"}))},jt=c()();jt.use((function(e,n,t){var r=a.a.createElement(l.StaticRouter,{location:e.url,context:{}},a.a.createElement(St,null)),o=u.a.renderToString(r);n.send(o)})),jt.listen(4e3,(function(){console.log("Running on http://localhost:5000")}))}]);